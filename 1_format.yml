target_default: 1_format

packages:
  - zeallot
  - readr

sources:
  - 1_format/src/format_tasks.R

targets:
  1_format:
    depends:
      - 1_format/log/1_format_tasks.ind

  site_ids:
    command: get_site_ids(file = 'lib/crosswalks/pipeline_3_lakes.csv')

  format_data_task_plan:
    command: create_format_task_plan(site_ids, ind_dir = I("1_format"))

  1_format_tasks.yml:
    command: create_format_task_makefile(task_plan = format_data_task_plan, makefile = target_name, ind_complete=TRUE)

  1_format/log/1_format_tasks.ind:
    command: loop_tasks(task_plan = format_data_task_plan, task_makefile = '1_format_tasks.yml', num_tries=1)
